<head>
  <title>rockabadge</title>
</head>

<body>
  {{loginButtons}}
  {{> badgeTypeList}}
</body>

<template name="nominateForm">
  <div class="well">
    <button type="button" class="close">Ã—</button>
    <h4>Nominate a Friend for the {{name}} Badge</h4>
    <input type="text" placeholder="Enter friend name" class="friends-list" data-provide="typeahead" data-source="{{friends}}">
    <button class="btn btn-primary nominate">Nominate</button>
  </div>
</template>

<template name="badgeTypeList">
  <h2>Badge Types</h2>
  <ul class="badgeTypes">
    {{#each badgeTypes}}
      {{> badgeType}}
    {{/each}}
  </ul>
  {{#if adminUser}}
  <button class="btn add-badgetype">Add a Badge Type</button>
  {{/if}}
</template>

<template name="badgeTypeImage">
  {{#if editing}}
  <input id="edit" type="text" value="{{image}}">
  {{else}}
  <img class="badge-image display {{editable}}" src="{{image}}" title="Badge image">
  {{/if}}
</template>

<template name="badgeTypeName">
  {{#if editing}}
  <input id="edit" type="text" value="{{name}}">
  {{else}}
  <div class="badge-name display {{editable}}" title="Badge name">{{name}}</div>
  {{/if}}
</template>

<template name="badgeTypeDesc">
  <div>
  {{#if editing}}
  <textarea id="edit">{{description}}</textarea>
  {{else}}
  <div class="display {{editable}}" title="Badge description">{{description}}</div>
  {{/if}}
  </div>
</template>

<template name="badgeType">
  <li>
    {{> badgeTypeImage}}
    {{> badgeTypeName}}
    {{> badgeTypeDesc}}
    <div class="actions">
    {{#if adminUser}}
    <button class="btn btn-mini btn-danger remove-badgetype">Remove</button>
    {{/if}}
    {{#if currentUser}}
      {{#if nominating}}
      {{else}}
      <button class="btn btn-mini nominate">Nominate&hellip;</button>
      {{/if}}
    {{/if}}
    </div>
    {{#if nominating}}
    {{> nominateForm}}
    {{/if}}
    {{#if currentUser}}
    {{> nominations }}
    {{/if}}
  </li>
</template>

<template name="fb-link">
  <img class="fb-avatar-tiny" src="//graph.facebook.com/{{id}}/picture"> 
    <a href=" http://www.facebook.com/profile.php?id={{id}}" target="_blank">{{name}}</a>
</template>

<template name="nominations">
  <ul>
    {{#each nominations}}
    <li>{{> fb-link nominator}} nominated {{> fb-link nominee}}
      for this badge on {{nicedate date}}.</li>
    {{/each}}
  </ul>
</template>
